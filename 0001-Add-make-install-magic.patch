From c63d8493089182c70db0a2f8653211ec8969707b Mon Sep 17 00:00:00 2001
From: Auke Kok <auke-jan.h.kok@intel.com>
Date: Wed, 8 Nov 2017 12:02:33 -0800
Subject: [PATCH] Add `make install` magic.

---
 invm-cim/CMakeLists.txt  | 8 ++++++++
 invm-cli/CMakeLists.txt  | 3 +++
 invm-i18n/CMakeLists.txt | 3 +++
 3 files changed, 14 insertions(+)

diff --git a/invm-cim/CMakeLists.txt b/invm-cim/CMakeLists.txt
index b7ae683..acdda65 100644
--- a/invm-cim/CMakeLists.txt
+++ b/invm-cim/CMakeLists.txt
@@ -46,6 +46,10 @@ FILE(GLOB CIMFRAMEWORK_SRC
 	src/framework/*
 	)
 
+FILE(GLOB CMPI_HEADERS
+	../external/invm-cim/cmpi/include/cmpi/*.h
+	)
+
 if (WIN_BUILD)
 	file(GLOB OS_SRC_FILES src/cimom/wmi/*)
 else ()
@@ -57,6 +61,10 @@ list (APPEND CIMFRAMEWORK_SRC ${OS_SRC_FILES})
 
 add_library(invm-cim ${LIB_TYPE} ${CIMFRAMEWORK_SRC})
 
+install (TARGETS invm-cim DESTINATION lib)
+install (FILES ${CIMFRAMEWORK_HEADERS} DESTINATION include/libinvm-cim)
+install (FILES ${CMPI_HEADERS} DESTINATION include/libinvm-cim/cmpi)
+
 set_target_properties(invm-cim
        PROPERTIES
        VERSION 1.0.0
diff --git a/invm-cli/CMakeLists.txt b/invm-cli/CMakeLists.txt
index 7a92162..1561951 100644
--- a/invm-cli/CMakeLists.txt
+++ b/invm-cli/CMakeLists.txt
@@ -36,6 +36,9 @@ file(GLOB SRC src/framework/*.cpp)
 
 add_library(invm-cli ${LIB_TYPE} ${SRC})
 
+install (TARGETS invm-cli DESTINATION lib)
+install (FILES ${CLIFRAMEWORK_HEADERS} DESTINATION include/libinvm-cli)
+
 target_compile_definitions(invm-cli
         PRIVATE -D_FORTIFY_SOURCE=2
         PRIVATE -D_XOPEN_SOURCE=500
diff --git a/invm-i18n/CMakeLists.txt b/invm-i18n/CMakeLists.txt
index f96f15d..50e5bcc 100644
--- a/invm-i18n/CMakeLists.txt
+++ b/invm-i18n/CMakeLists.txt
@@ -61,6 +61,9 @@ endif()
 
 add_library(invm-i18n ${LIB_TYPE} ${SRC})
 
+install (TARGETS invm-i18n DESTINATION lib)
+install (FILES ${I18NHEADERS} DESTINATION include/libinvm-i18n)
+
 # this will create the symlinks on Linux
 set_target_properties(invm-i18n
         PROPERTIES
-- 
2.15.0

